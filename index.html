<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#111111" />
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="icon" href="icon-192.png" />
  <link rel="stylesheet" href="styles.css" />
  <title>Recall Pairs v12</title>
</head>
<body>
  <header class="top">
    <h1>Recall Pairs <span class="badge">v12</span></h1>
    <p class="sub">20/40ペア × 15/30/45/60秒 × 難易度 低/中/高（抽象語ミックス可）</p>
  </header>

  <main class="wrap">

    <section class="card" id="setupCard">
      <h2>設定</h2>

      <div class="grid">
        <label class="field">
          <span>ペア数</span>
          <select id="pairCount">
            <option value="20">20</option>
            <option value="40" selected>40</option>
          </select>
        </label>

        <label class="field">
          <span>記憶時間</span>
          <select id="memorizeSeconds">
            <option value="15">15秒</option>
            <option value="30" selected>30秒</option>
            <option value="45">45秒</option>
            <option value="60">60秒</option>
          </select>
        </label>

        <label class="field">
          <span>難易度</span>
          <select id="difficulty">
            <option value="low">低</option>
            <option value="mid" selected>中</option>
            <option value="high">高</option>
          </select>
        </label>

        <label class="field">
          <span>抽象語ミックス</span>
          <select id="mixAbstract">
            <option value="0" selected>OFF</option>
            <option value="0.2">20%</option>
            <option value="0.35">35%</option>
            <option value="0.5">50%</option>
          </select>
        </label>
      </div>

      <div class="row">
        <button class="primary" id="startBtn">開始</button>
        <button id="resumeBtn">再開</button>
      </div>

      <details class="help">
        <summary>使い方</summary>
        <ol>
          <li>記憶フェーズ：ペア（左→右）を覚える。時間切れで自動的に想起へ。</li>
          <li>想起フェーズ：左単語を見て右単語を入力。</li>
          <li>答え合わせ：正答率＋「ペア｜あなた｜正解｜判定」を表示（正解行はハイライト）。</li>
        </ol>
      </details>

      <h3>履歴</h3>
      <div class="row">
        <button id="clearHistoryBtn">履歴を削除</button>
      </div>
      <div class="tableWrap">
        <table class="pairs">
          <thead>
            <tr><th>日時</th><th>難易度</th><th>ペア</th><th>時間</th><th>抽象</th><th>正答</th></tr>
          </thead>
          <tbody id="historyBody"></tbody>
        </table>
      </div>

      <p class="foot">オフライン対応（PWA）。データは端末内に保存。</p>
    </section>

    <section class="card" id="memorizeCard" hidden>
      <h2>記憶フェーズ</h2>
      <p id="memorizeInfo" class="muted"></p>
      <div class="row">
        <div class="timer" id="timerLabel">00:00</div>
        <button id="toRecallBtn">今すぐ想起へ</button>
      </div>
      <div class="tableWrap">
        <table class="pairs">
          <thead>
            <tr><th>#</th><th>左</th><th>右</th></tr>
          </thead>
          <tbody id="memorizeTable"></tbody>
        </table>
      </div>
    </section>

    <section class="card" id="recallCard" hidden>
      <h2>想起フェーズ</h2>
      <p id="recallInfo" class="muted"></p>

      <div class="row">
        <button id="showAnswersBtn">答えを表示</button>
        <button class="primary" id="checkBtn">答え合わせ</button>
        <button id="backBtn">設定に戻る</button>
      </div>

      <div class="tableWrap">
        <table class="pairs">
          <thead>
            <tr><th>#</th><th>ペア（左）</th><th>あなたの回答</th></tr>
          </thead>
          <tbody id="recallTable"></tbody>
        </table>
      </div>
    </section>

    <section class="card" id="resultCard" hidden>
      <h2>結果</h2>
      <div class="score">
        <div class="big" id="scoreMain">0%</div>
        <div class="muted" id="scoreSub">0/0 正解</div>
      </div>

      <div class="row">
        <button class="primary" id="retryBtn">同条件でやり直す</button>
        <button id="finishBtn">完了（履歴に保存）</button>
      </div>

      <h3>採点の詳細</h3>
      <div class="tableWrap">
        <table class="pairs">
          <thead>
            <tr><th>#</th><th>ペア（左）</th><th>あなたの回答</th><th>正解</th><th>判定</th></tr>
          </thead>
          <tbody id="reviewTable"></tbody>
        </table>
      </div>
    </section>

  </main>

  <script src="app.v12.js"></script>
</body>
</html>
