<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Recall Pairs v21</title>
  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="styles.css?v=20" />
</head>
<body>
  <header class="top">
    <h1>Recall Pairs <span class="ver">v21</span></h1>
    <p class="sub" id="subtitle">語彙を読み込み中...</p>
  </header>

  <main class="wrap">
    <!-- SETUP -->
    <section class="card" id="setup">
      <div class="grid">
        <label>ペア数
          <select id="pairCount">
            <option value="20">20</option>
            <option value="40" selected>40</option>
          </select>
        </label>

        <label>記憶時間（秒）
          <select id="time">
            <option value="15">15</option>
            <option value="30" selected>30</option>
            <option value="45">45</option>
            <option value="60">60</option>
          </select>
        </label>

        <label>難易度（ベース）
          <select id="difficulty">
            <option value="low">低</option>
            <option value="mid" selected>中</option>
            <option value="high">高</option>
          </select>
        </label>

        <label>抽象語ミックス率
          <select id="absMix">
            <option value="0" selected>OFF</option>
            <option value="0.2">20%</option>
            <option value="0.35">35%</option>
            <option value="0.5">50%</option>
          </select>
        </label>
      </div>

      <div class="row">
        <button id="start" class="primary">開始</button>
        <button id="resume">再開</button>
      </div>

      <details class="hint">
        <summary>ルール（優先順位）</summary>
        <ul>
          <li><b>難易度</b>でベース語彙を選ぶ → その後、指定割合だけ<b>抽象語</b>に置き換えます。</li>
          <li>抽象語ミックスOFFなら、全て難易度ベースの語彙です。</li>
        </ul>
      </details>

      <h3>履歴</h3>
      <div class="muted small">直近50回まで。端末内に保存。</div>
      <div id="history"></div>
      <div class="row">
        <button id="clearHistory">履歴を削除</button>
      </div>
    </section>

    <!-- MEMORIZE -->
    <section class="card" id="memorize" hidden>
      <div class="row between">
        <h2>記憶</h2>
        <div class="timer" id="timerLabel">00:00</div>
      </div>
      <p class="muted" id="memoInfo"></p>
      <div id="memoList"></div>
      <div class="row">
        <button id="toRecall">今すぐ想起へ</button>
        <button id="backToSetup1">設定に戻る</button>
      </div>
    </section>

    <!-- RECALL -->
    <section class="card" id="recall" hidden>
      <div class="row between">
        <h2>想起</h2>
        <div class="pill muted">入力は自動保存</div>
      </div>
      <p class="muted">左の単語を見て、右の単語を入力してください。</p>
      <div id="recallList"></div>
      <div class="row">
        <button id="check" class="primary">答え合わせ</button>
        <button id="backToSetup2">設定に戻る</button>
      </div>
    </section>

    <!-- RESULT -->
    <section class="card" id="result" hidden>
      <div class="row between">
        <h2>結果</h2>
        <div class="score">
          <span class="big" id="scorePct">0%</span>
          <span class="muted" id="scoreCount">0/0</span>
        </div>
      </div>

      <div class="row">
        <button id="retry" class="primary">同条件で再挑戦</button>
        <button id="finish">履歴に保存して設定へ</button>
      </div>

      <h3>採点の詳細</h3>
      <div id="resultList"></div>
    </section>
  </main>

  <script src="app.js?v=15"></script>
</body>
</html>
